import psutil
import SystemInfo

systemInfo = SystemInfo.SystemInfo(pids=None, processName=None)

cpuAlertCount = int(systemInfo.cpu_wait_time)
cpuAlertCounter = 0

while True :
    # check cpu usage rate
    systemInfo.getCpuInfo()
    # if cpuAlertCount > cpuAlertCount :
        # call the alert moduel
        # list top 10 process
    while True:
        top = {}
        _pids = psutil.pids()
        for pid in _pids:
            p = psutil.Process(pid)
            top[p.name()] = p.cpu_percent()
        top = sorted(top.iteritems(), key=lambda d:d[1], reverse=True)
        top = top[0:10]
        print 'cpu is busy'
        print top
